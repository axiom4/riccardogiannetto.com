<div #container class="gallery-lightbox-container">
  <div
    #galleryItem
    *ngFor="let column of data; let col = index"
    class="gallery"
  >
    <div *ngFor="let data of column; let i = index" class="gallery-img">
      <img
        #galleryImg
        (click)="onPreviewImage(col, i)"
        alt="{{ data.title }}"
        onKeyPress=""
        onKeyDown=""
        onKeyUp=""
        src="{{ data.url }}/width/{{
          (innerWidth - (innerWidth % columns)) / columns
        }}"
        width="{{ galleryImg.width }}"
        height="{{ (data.height / data.width) * galleryImg.width }}"
        priority
      />
    </div>
  </div>
  <div *ngIf="showMask" class="lightbox" [@animation-leave]="{ value: 'hide' }">
    <button
      type="button"
      (click)="onclosePreview()"
      *ngIf="previewImage"
      class="close-btn"
      title="Close"
    >
      <span
        class="icon-lightbox-carousel"
        onKeyPress=""
        onKeyDown=""
        onKeyUp=""
      >
        Close
      </span>
    </button>
    <button
      *ngIf="controls"
      type="button"
      class="btn-lightbox-carousel btn-prev"
      title="Previous"
      (click)="prev()"
    >
      <span class="icon-lightbox-carousel">Prev</span>
    </button>
    <button
      type="button"
      *ngIf="controls"
      class="btn-lightbox-carousel btn-next"
      title="Next"
      (click)="next()"
    >
      <span class="icon-lightbox-carousel">Next</span>
    </button>
    <div
      *ngIf="previewImage"
      [@animation-enter]="{ value: 'visible' }"
      (@animation-enter.done)="onAnimationEnd($event)"
      class="lightbox-img"
    >
      <img
        #galleryPreviewImg
        *ngIf="currentLightboxImg"
        alt="{{ currentLightboxImg.title }}"
        src="{{ currentLightboxImg.url }}/jpeg/{{ container.offsetWidth }}"
        width="{{ innerWidth }}"
        height="{{
          (currentLightboxImg.height / currentLightboxImg.width) *
            container.offsetWidth
        }}"
        sizes="100vw"
        priority
      />
    </div>
  </div>
</div>
