<div class="site-content">
  @if (isLoading()) {
    <div class="loading-container">
      <p>Caricamento in corso...</p>
    </div>
  } @else if (error()) {
    <div class="error-container">
      <p>{{ error() }}</p>
    </div>
  } @else {
    <div class="blog-list">
      @for (post of posts(); track post.id) {
        <article class="post-entry">
          <header class="entry-header">
            <h2 class="entry-title">
              <a [routerLink]="['/blog', post.id]">{{ post.title }}</a>
            </h2>
            <div class="entry-meta">
              <span class="posted-on">{{
                post.created_at | date: "longDate"
              }}</span>
            </div>
          </header>

          @if (post.image) {
            <div class="post-thumbnail">
              <a [routerLink]="['/blog', post.id]">
                <div class="ratio-container">
                  <img
                    [ngSrc]="'/api/blog/posts/' + post.id"
                    [alt]="post.title"
                    [priority]="$index < 2"
                    fill
                  />
                </div>
              </a>
            </div>
          }

          <div class="entry-summary">
            <!-- Add a summary or excerpt here if available in PostPreview -->
          </div>
        </article>
      } @empty {
        <p>Nessun post trovato.</p>
      }
    </div>
  }
</div>
